# DigiFlow - Intelligent Production Scheduling Platform

**DigiFlow is a full-stack, multi-tenant SaaS application designed to replace inefficient Excel-based scheduling for discrete manufacturers with an intelligent, automated system.**

This platform centralizes production orders, machine data, and process routings to generate optimized schedules using constraint programming. It provides a dual-interface experience: a comprehensive dashboard for managers and a simplified, real-time task interface for machine operators on the factory floor.

---

## Core Features

### For Managers & Planners (Admin UI)

* **Centralized Dashboards:** Get a high-level overview of the entire factory floor with live KPIs for machine utilization, order completion rates, and active downtime events.
* **Intelligent Scheduling:** Generate optimized production schedules in seconds using a powerful **Google OR-Tools (CP-SAT)** solver. The engine considers real-world constraints like machine availability, process step dependencies, setup times, and working hours (Mon-Sat, 9-5).
* **Interactive Gantt Chart:** Visualize the entire production plan with a dynamic Gantt chart generated by Plotly, showing tasks per machine on a clear timeline.
* **Full Data Management:** Complete CRUD (Create, Read, Update, Delete) functionality for all core manufacturing entities:
    * Production Orders
    * Machines & Machine Types
    * Multi-step Process Routings
    * Downtime Events
    * User Management (Admins, Managers, Operators)
* **Seamless Data Migration:** Easily import existing data for Orders, Machines, and Processes from Excel/CSV files to get started in minutes.
* **Live Analytics:** View aggregated reports on key metrics like downtime reasons and order status summaries to make data-driven decisions.

### For Factory Floor Workers (Operator UI)

* **Simplified & Secure Login:** A dedicated, mobile-friendly login for operators to access their workflow.
* **Machine Selection:** Operators can easily select the machine they are working on for their shift from a clear, visual grid.
* **Real-time Task View:** A high-contrast, touch-friendly interface that displays the single most important job (`current` or `next`) for the selected machine.
* **Dependency-Aware Workflow:** The system enforces precedence constraints, ensuring an operator cannot start a step (e.g., Polishing) before its prerequisite step (e.g., Milling) is marked as complete.
* **Full Task Control:** Operators can update the real-time status of a job with single taps for actions like **Start, Finish, Pause, Resume, Cancel, and Report Issue**.
* **Live Feedback Loop:** All operator actions instantly update the database, reflecting the true status of the factory floor on the manager's dashboard and Gantt chart.

---

## üõ†Ô∏è Tech Stack

| Area      | Technologies                                                                          |
| :-------- | :------------------------------------------------------------------------------------ |
| **Backend** | Python, FastAPI, SQLAlchemy, PostgreSQL, Google OR-Tools (CP-SAT), Pydantic, Alembic, JWT |
| **Frontend** | React, TypeScript, TanStack (React) Query, Tailwind CSS, Recharts, Plotly.js, Vite, Axios |
| **DevOps** | Git, GitHub, (Deployment planned on Render & Vercel)                                  |

---

## üöÄ Getting Started

### Prerequisites

* Python 3.10+
* Node.js 18+ and npm
* PostgreSQL database

### Backend Setup

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/your-username/digiflow.git](https://github.com/your-username/digiflow.git)
    cd digiflow/backend
    ```
2.  **Create a virtual environment and install dependencies:**
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # On Windows: .venv\Scripts\activate
    pip install -r requirements.txt
    ```
3.  **Configure your database:**
    * Create a `.env` file in the `backend` directory.
    * Add your PostgreSQL connection string: `DATABASE_URL="postgresql://user:password@localhost/digiflow_db"`
4.  **Run database migrations:**
    ```bash
    alembic upgrade head
    ```
5.  **Run the server:**
    ```bash
    uvicorn backend.app.main:app --reload
    ```
    The backend API will be available at `http://127.0.0.1:8000`.

### Frontend Setup

1.  **Navigate to the frontend directory and install dependencies:**
    ```bash
    cd ../frontend
    npm install
    ```
2.  **Run the development server:**
    ```bash
    npm run dev
    ```
    The frontend will be available at `http://localhost:5173`.

---

## (Core Concepts)

### The Scheduling Engine

The heart of DigiFlow is the `scheduler.py` module, which uses Google's CP-SAT solver. It models the production floor as a job-shop problem with several key constraints:
* **Precedence Constraints:** Ensures that Step 2 of a job cannot start before Step 1 is finished.
* **No-Overlap Constraints:** Prevents two jobs from being scheduled on the same machine at the same time.
* **Working Hours:** Creates "forbidden intervals" for nights and weekends (configurable in `config.py`), forcing the solver to only use available working time.

### The Dual-Interface UX

The application is split into two distinct user experiences to serve two different user personas, both powered by the same secure API:
1.  **The Manager UI** is data-dense, providing powerful tools for planning, analysis, and oversight.
2.  **The Operator UI** is information-sparse, designed for speed and clarity in a busy factory environment. This real-time feedback loop is what keeps the manager's plan in sync with reality.
